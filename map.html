<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>A Grand Tour - Route Map</title>
    <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
    <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.js"></script>
    <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.1/mapbox-gl.css" rel="stylesheet">
    <style>
        body { margin: 0; padding: 0; }
        #map { position: absolute; top: 0; bottom: 0; width: 100%; }
        #legend {
            position: absolute;
            bottom: 30px;
            left: 10px;
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 8px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 13px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            max-width: 280px;
        }
        #legend h3 { margin: 0 0 10px 0; font-size: 14px; }
        .legend-item { display: flex; align-items: center; margin: 5px 0; }
        .legend-color { width: 20px; height: 4px; margin-right: 8px; border-radius: 2px; }
        #info {
            position: absolute;
            top: 10px;
            left: 10px;
            background: rgba(255,255,255,0.9);
            padding: 15px;
            border-radius: 8px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 13px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            max-width: 300px;
        }
        #info h2 { margin: 0 0 5px 0; font-size: 16px; }
        #info p { margin: 5px 0; color: #666; }
        #controls {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(255,255,255,0.9);
            padding: 10px;
            border-radius: 8px;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-size: 12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        #controls label { display: block; margin: 5px 0; cursor: pointer; }
        .mapboxgl-popup-content {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            padding: 10px 15px;
        }
        .popup-title { font-weight: 600; font-size: 14px; }
        .popup-info { color: #666; font-size: 12px; margin-top: 4px; }
    </style>
</head>
<body>
<div id="map"></div>
<div id="info">
    <h2>A Grand Tour</h2>
    <p>15 years | 200,000 km | 100+ countries</p>
    <p>Feb 2027 - Aug 2042</p>
</div>
<div id="legend">
    <h3>Route Legs</h3>
    <div class="legend-item"><div class="legend-color" style="background: #e74c3c;"></div>Leg 1: East (2027-2029)</div>
    <div class="legend-item"><div class="legend-color" style="background: #3498db;"></div>Leg 2: Americas (2030-2033)</div>
    <div class="legend-item"><div class="legend-color" style="background: #2ecc71;"></div>Leg 3: West (2034-2042)</div>
    <div class="legend-item"><div class="legend-color" style="background: #9b59b6; height: 2px; border-style: dashed;"></div>Ship routes</div>
</div>
<div id="controls">
    <strong>Show/Hide</strong>
    <label><input type="checkbox" id="toggle-leg1" checked> Leg 1: East</label>
    <label><input type="checkbox" id="toggle-leg2" checked> Leg 2: Americas</label>
    <label><input type="checkbox" id="toggle-leg3" checked> Leg 3: West</label>
    <label><input type="checkbox" id="toggle-ships" checked> Ship routes</label>
</div>

<script>
mapboxgl.accessToken = 'pk.eyJ1Ijoiamx4cTAiLCJhIjoiY21qd2QwOGRpNXVuNzNnb2txNmdkemd2ZyJ9.JpfheNv0aknnk-pbhNOGQg';

const map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/light-v11',
    center: [40, 20],
    zoom: 1.5
});

// Major stops organized by trip with coordinates [lng, lat]
const stops = {
    // LEG 1: EAST (Red) - Trips 1-5
    leg1: [
        // Trip 1: Dubai → Iran → Pakistan → India
        { name: "Dubai", coords: [55.2708, 25.2048], trip: 1, country: "UAE" },
        { name: "Abu Dhabi", coords: [54.3666, 24.4539], trip: 1, country: "UAE" },
        { name: "Muscat", coords: [58.4059, 23.5880], trip: 1, country: "Oman" },
        { name: "Nizwa", coords: [57.5311, 22.9333], trip: 1, country: "Oman" },
        { name: "Bandar Abbas", coords: [56.2808, 27.1865], trip: 1, country: "Iran", ship: true },
        { name: "Shiraz", coords: [52.5311, 29.5918], trip: 1, country: "Iran" },
        { name: "Isfahan", coords: [51.6680, 32.6546], trip: 1, country: "Iran" },
        { name: "Yazd", coords: [54.3675, 31.8974], trip: 1, country: "Iran" },
        { name: "Tehran", coords: [51.3890, 35.6892], trip: 1, country: "Iran" },
        { name: "Tabriz", coords: [46.2919, 38.0800], trip: 1, country: "Iran" },
        { name: "Quetta", coords: [67.0011, 30.1798], trip: 1, country: "Pakistan" },
        { name: "Lahore", coords: [74.3587, 31.5204], trip: 1, country: "Pakistan" },
        { name: "Islamabad", coords: [73.0479, 33.6844], trip: 1, country: "Pakistan" },
        { name: "Hunza", coords: [74.6597, 36.3167], trip: 1, country: "Pakistan" },
        { name: "Amritsar", coords: [74.8723, 31.6340], trip: 1, country: "India" },
        { name: "Delhi", coords: [77.1025, 28.7041], trip: 1, country: "India" },
        { name: "Jaipur", coords: [75.7873, 26.9124], trip: 1, country: "India" },
        { name: "Jodhpur", coords: [73.0243, 26.2389], trip: 1, country: "India" },
        { name: "Udaipur", coords: [73.7125, 24.5854], trip: 1, country: "India" },

        // Trip 2: India → Sri Lanka → Nepal → Bangladesh
        { name: "Agra", coords: [78.0081, 27.1767], trip: 2, country: "India" },
        { name: "Varanasi", coords: [82.9913, 25.3176], trip: 2, country: "India" },
        { name: "Mumbai", coords: [72.8777, 19.0760], trip: 2, country: "India" },
        { name: "Goa", coords: [74.1240, 15.2993], trip: 2, country: "India" },
        { name: "Colombo", coords: [79.8612, 6.9271], trip: 2, country: "Sri Lanka", ship: true },
        { name: "Kandy", coords: [80.6337, 7.2906], trip: 2, country: "Sri Lanka" },
        { name: "Galle", coords: [80.2170, 6.0535], trip: 2, country: "Sri Lanka" },
        { name: "Kolkata", coords: [88.3639, 22.5726], trip: 2, country: "India" },
        { name: "Darjeeling", coords: [88.2627, 27.0410], trip: 2, country: "India" },
        { name: "Kathmandu", coords: [85.3240, 27.7172], trip: 2, country: "Nepal" },
        { name: "Pokhara", coords: [83.9856, 28.2096], trip: 2, country: "Nepal" },
        { name: "Dhaka", coords: [90.4125, 23.8103], trip: 2, country: "Bangladesh" },

        // Trip 3: Thailand → SE Asia → Singapore
        { name: "Bangkok", coords: [100.5018, 13.7563], trip: 3, country: "Thailand", ship: true },
        { name: "Vientiane", coords: [102.6331, 17.9757], trip: 3, country: "Laos" },
        { name: "Luang Prabang", coords: [102.1346, 19.8867], trip: 3, country: "Laos" },
        { name: "Hanoi", coords: [105.8342, 21.0278], trip: 3, country: "Vietnam" },
        { name: "Hue", coords: [107.5905, 16.4637], trip: 3, country: "Vietnam" },
        { name: "Hoi An", coords: [108.3380, 15.8801], trip: 3, country: "Vietnam" },
        { name: "Ho Chi Minh City", coords: [106.6297, 10.8231], trip: 3, country: "Vietnam" },
        { name: "Phnom Penh", coords: [104.9160, 11.5564], trip: 3, country: "Cambodia" },
        { name: "Siem Reap", coords: [103.8600, 13.3633], trip: 3, country: "Cambodia" },
        { name: "Chiang Mai", coords: [98.9853, 18.7883], trip: 3, country: "Thailand" },
        { name: "Penang", coords: [100.3327, 5.4141], trip: 3, country: "Malaysia" },
        { name: "Kuala Lumpur", coords: [101.6869, 3.1390], trip: 3, country: "Malaysia" },
        { name: "Singapore", coords: [103.8198, 1.3521], trip: 3, country: "Singapore" },

        // Trip 4: Indonesia → Timor → Australia
        { name: "Yogyakarta", coords: [110.3695, -7.7956], trip: 4, country: "Indonesia" },
        { name: "Bali", coords: [115.1889, -8.4095], trip: 4, country: "Indonesia" },
        { name: "Flores", coords: [121.0794, -8.6574], trip: 4, country: "Indonesia" },
        { name: "Dili", coords: [125.5795, -8.5569], trip: 4, country: "Timor-Leste" },
        { name: "Darwin", coords: [130.8456, -12.4634], trip: 4, country: "Australia" },
        { name: "Broome", coords: [122.2363, -17.9614], trip: 4, country: "Australia" },
        { name: "Perth", coords: [115.8605, -31.9505], trip: 4, country: "Australia" },
        { name: "Adelaide", coords: [138.6007, -34.9285], trip: 4, country: "Australia" },
        { name: "Melbourne", coords: [144.9631, -37.8136], trip: 4, country: "Australia" },
        { name: "Sydney", coords: [151.2093, -33.8688], trip: 4, country: "Australia" },
        { name: "Brisbane", coords: [153.0251, -27.4698], trip: 4, country: "Australia" },

        // Trip 5: New Zealand
        { name: "Auckland", coords: [174.7633, -36.8485], trip: 5, country: "New Zealand", ship: true },
        { name: "Rotorua", coords: [176.2497, -38.1368], trip: 5, country: "New Zealand" },
        { name: "Wellington", coords: [174.7762, -41.2865], trip: 5, country: "New Zealand" },
        { name: "Christchurch", coords: [172.6362, -43.5321], trip: 5, country: "New Zealand" },
        { name: "Queenstown", coords: [168.6626, -45.0312], trip: 5, country: "New Zealand" },
        { name: "Milford Sound", coords: [167.9256, -44.6414], trip: 5, country: "New Zealand" },
    ],

    // LEG 2: AMERICAS (Blue) - Trips 6-12
    leg2: [
        // Trip 6: Chile → Patagonia → Argentina
        { name: "Valparaíso", coords: [-71.6273, -33.0472], trip: 6, country: "Chile", ship: true },
        { name: "Santiago", coords: [-70.6483, -33.4489], trip: 6, country: "Chile" },
        { name: "Pucón", coords: [-71.9545, -39.2823], trip: 6, country: "Chile" },
        { name: "Puerto Varas", coords: [-72.9854, -41.3167], trip: 6, country: "Chile" },
        { name: "Torres del Paine", coords: [-72.9658, -50.9423], trip: 6, country: "Chile" },
        { name: "El Calafate", coords: [-72.2753, -50.3402], trip: 6, country: "Argentina" },
        { name: "Ushuaia", coords: [-68.3030, -54.8019], trip: 6, country: "Argentina" },
        { name: "Puerto Madryn", coords: [-65.0368, -42.7692], trip: 6, country: "Argentina" },
        { name: "Buenos Aires", coords: [-58.3816, -34.6037], trip: 6, country: "Argentina" },

        // Trip 7: Argentina → Brazil → Bolivia → Peru
        { name: "Iguazu Falls", coords: [-54.4409, -25.6953], trip: 7, country: "Argentina/Brazil" },
        { name: "Asunción", coords: [-57.5759, -25.2637], trip: 7, country: "Paraguay" },
        { name: "Brasília", coords: [-47.8825, -15.7942], trip: 7, country: "Brazil" },
        { name: "Santa Cruz", coords: [-63.1812, -17.7833], trip: 7, country: "Bolivia" },
        { name: "Sucre", coords: [-65.2550, -19.0196], trip: 7, country: "Bolivia" },
        { name: "Uyuni", coords: [-66.8250, -20.4604], trip: 7, country: "Bolivia" },
        { name: "La Paz", coords: [-68.1193, -16.4897], trip: 7, country: "Bolivia" },
        { name: "Puno", coords: [-70.0219, -15.8402], trip: 7, country: "Peru" },
        { name: "Arequipa", coords: [-71.5375, -16.4090], trip: 7, country: "Peru" },
        { name: "Cusco", coords: [-71.9675, -13.5320], trip: 7, country: "Peru" },
        { name: "Lima", coords: [-77.0428, -12.0464], trip: 7, country: "Peru" },

        // Trip 8: Peru → Ecuador → Colombia → Central America
        { name: "Guayaquil", coords: [-79.8891, -2.1894], trip: 8, country: "Ecuador" },
        { name: "Quito", coords: [-78.4678, -0.1807], trip: 8, country: "Ecuador" },
        { name: "Bogotá", coords: [-74.0721, 4.7110], trip: 8, country: "Colombia" },
        { name: "Medellín", coords: [-75.5636, 6.2442], trip: 8, country: "Colombia" },
        { name: "Cartagena", coords: [-75.5144, 10.3910], trip: 8, country: "Colombia" },
        { name: "Panama City", coords: [-79.5197, 8.9824], trip: 8, country: "Panama", ship: true },
        { name: "San José", coords: [-84.0907, 9.9281], trip: 8, country: "Costa Rica" },
        { name: "Managua", coords: [-86.2362, 12.1150], trip: 8, country: "Nicaragua" },
        { name: "Tegucigalpa", coords: [-87.1921, 14.0723], trip: 8, country: "Honduras" },
        { name: "San Salvador", coords: [-89.2182, 13.6929], trip: 8, country: "El Salvador" },
        { name: "Guatemala City", coords: [-90.5069, 14.6349], trip: 8, country: "Guatemala" },
        { name: "Antigua", coords: [-90.7295, 14.5586], trip: 8, country: "Guatemala" },

        // Trip 9: Central America → Mexico
        { name: "Belize City", coords: [-88.1962, 17.5046], trip: 9, country: "Belize" },
        { name: "Tulum", coords: [-87.4290, 20.2114], trip: 9, country: "Mexico" },
        { name: "Mérida", coords: [-89.5926, 20.9674], trip: 9, country: "Mexico" },
        { name: "Palenque", coords: [-91.9822, 17.5089], trip: 9, country: "Mexico" },
        { name: "San Cristóbal", coords: [-92.6376, 16.7370], trip: 9, country: "Mexico" },
        { name: "Oaxaca", coords: [-96.7266, 17.0732], trip: 9, country: "Mexico" },
        { name: "Mexico City", coords: [-99.1332, 19.4326], trip: 9, country: "Mexico" },
        { name: "Guanajuato", coords: [-101.2574, 21.0190], trip: 9, country: "Mexico" },
        { name: "Guadalajara", coords: [-103.3496, 20.6597], trip: 9, country: "Mexico" },
        { name: "Puerto Vallarta", coords: [-105.2353, 20.6534], trip: 9, country: "Mexico" },

        // Trip 10: Mexico → USA Southwest
        { name: "La Paz (Baja)", coords: [-110.3128, 24.1426], trip: 10, country: "Mexico" },
        { name: "Cabo San Lucas", coords: [-109.9167, 22.8905], trip: 10, country: "Mexico" },
        { name: "Tijuana", coords: [-117.0382, 32.5149], trip: 10, country: "Mexico" },
        { name: "San Diego", coords: [-117.1611, 32.7157], trip: 10, country: "USA" },
        { name: "Los Angeles", coords: [-118.2437, 34.0522], trip: 10, country: "USA" },
        { name: "Las Vegas", coords: [-115.1398, 36.1699], trip: 10, country: "USA" },
        { name: "Grand Canyon", coords: [-112.1401, 36.0544], trip: 10, country: "USA" },
        { name: "Monument Valley", coords: [-110.1135, 36.9980], trip: 10, country: "USA" },
        { name: "Moab", coords: [-109.5498, 38.5733], trip: 10, country: "USA" },
        { name: "Denver", coords: [-104.9903, 39.7392], trip: 10, country: "USA" },
        { name: "Santa Fe", coords: [-105.9378, 35.6870], trip: 10, country: "USA" },
        { name: "Austin", coords: [-97.7431, 30.2672], trip: 10, country: "USA" },

        // Trip 11: USA Midwest + East + Canada
        { name: "Kansas City", coords: [-94.5786, 39.0997], trip: 11, country: "USA" },
        { name: "Chicago", coords: [-87.6298, 41.8781], trip: 11, country: "USA" },
        { name: "Detroit", coords: [-83.0458, 42.3314], trip: 11, country: "USA" },
        { name: "Toronto", coords: [-79.3832, 43.6532], trip: 11, country: "Canada" },
        { name: "Montreal", coords: [-73.5673, 45.5017], trip: 11, country: "Canada" },
        { name: "Quebec City", coords: [-71.2082, 46.8139], trip: 11, country: "Canada" },
        { name: "Boston", coords: [-71.0589, 42.3601], trip: 11, country: "USA" },
        { name: "New York City", coords: [-74.0060, 40.7128], trip: 11, country: "USA" },
        { name: "Washington DC", coords: [-77.0369, 38.9072], trip: 11, country: "USA" },
        { name: "Nashville", coords: [-86.7816, 36.1627], trip: 11, country: "USA" },
        { name: "New Orleans", coords: [-90.0715, 29.9511], trip: 11, country: "USA" },
        { name: "Miami", coords: [-80.1918, 25.7617], trip: 11, country: "USA" },
        { name: "Minneapolis", coords: [-93.2650, 44.9778], trip: 11, country: "USA" },

        // Trip 12: Northern USA → Canada → Alaska
        { name: "Badlands", coords: [-102.3397, 43.8554], trip: 12, country: "USA" },
        { name: "Yellowstone", coords: [-110.5885, 44.4280], trip: 12, country: "USA" },
        { name: "Glacier NP", coords: [-113.7870, 48.7596], trip: 12, country: "USA" },
        { name: "Calgary", coords: [-114.0719, 51.0447], trip: 12, country: "Canada" },
        { name: "Banff", coords: [-115.5708, 51.1784], trip: 12, country: "Canada" },
        { name: "Jasper", coords: [-118.0814, 52.8737], trip: 12, country: "Canada" },
        { name: "Vancouver", coords: [-123.1207, 49.2827], trip: 12, country: "Canada" },
        { name: "Whitehorse", coords: [-135.0568, 60.7212], trip: 12, country: "Canada" },
        { name: "Fairbanks", coords: [-147.7164, 64.8378], trip: 12, country: "USA" },
        { name: "Denali", coords: [-151.1926, 63.1148], trip: 12, country: "USA" },
        { name: "Anchorage", coords: [-149.9003, 61.2181], trip: 12, country: "USA" },
        { name: "Seattle", coords: [-122.3321, 47.6062], trip: 12, country: "USA" },
    ],

    // LEG 3: WEST (Green) - Trips 13-21
    leg3: [
        // Trip 13: UK → Ireland → Western Europe
        { name: "Southampton", coords: [-1.4044, 50.9097], trip: 13, country: "UK", ship: true },
        { name: "London", coords: [-0.1278, 51.5074], trip: 13, country: "UK" },
        { name: "Edinburgh", coords: [-3.1883, 55.9533], trip: 13, country: "UK" },
        { name: "Isle of Skye", coords: [-6.2293, 57.2736], trip: 13, country: "UK" },
        { name: "Belfast", coords: [-5.9301, 54.5973], trip: 13, country: "UK" },
        { name: "Dublin", coords: [-6.2603, 53.3498], trip: 13, country: "Ireland" },
        { name: "Cork", coords: [-8.4863, 51.8969], trip: 13, country: "Ireland" },
        { name: "Paris", coords: [2.3522, 48.8566], trip: 13, country: "France" },
        { name: "Brussels", coords: [4.3517, 50.8503], trip: 13, country: "Belgium" },
        { name: "Amsterdam", coords: [4.9041, 52.3676], trip: 13, country: "Netherlands" },
        { name: "Frankfurt", coords: [8.6821, 50.1109], trip: 13, country: "Germany" },
        { name: "Munich", coords: [11.5820, 48.1351], trip: 13, country: "Germany" },

        // Trip 14: Nordics + Baltics
        { name: "Copenhagen", coords: [12.5683, 55.6761], trip: 14, country: "Denmark" },
        { name: "Oslo", coords: [10.7522, 59.9139], trip: 14, country: "Norway" },
        { name: "Bergen", coords: [5.3221, 60.3913], trip: 14, country: "Norway" },
        { name: "Lofoten", coords: [14.5615, 68.2092], trip: 14, country: "Norway" },
        { name: "Stockholm", coords: [18.0686, 59.3293], trip: 14, country: "Sweden" },
        { name: "Helsinki", coords: [24.9384, 60.1699], trip: 14, country: "Finland" },
        { name: "Tallinn", coords: [24.7536, 59.4370], trip: 14, country: "Estonia" },
        { name: "Riga", coords: [24.1052, 56.9496], trip: 14, country: "Latvia" },
        { name: "Vilnius", coords: [25.2797, 54.6872], trip: 14, country: "Lithuania" },

        // Trip 15: Poland → Western Balkans
        { name: "Warsaw", coords: [21.0122, 52.2297], trip: 15, country: "Poland" },
        { name: "Krakow", coords: [19.9450, 50.0647], trip: 15, country: "Poland" },
        { name: "Prague", coords: [14.4378, 50.0755], trip: 15, country: "Czechia" },
        { name: "Vienna", coords: [16.3738, 48.2082], trip: 15, country: "Austria" },
        { name: "Budapest", coords: [19.0402, 47.4979], trip: 15, country: "Hungary" },
        { name: "Ljubljana", coords: [14.5058, 46.0569], trip: 15, country: "Slovenia" },
        { name: "Zagreb", coords: [15.9819, 45.8150], trip: 15, country: "Croatia" },
        { name: "Dubrovnik", coords: [18.0944, 42.6507], trip: 15, country: "Croatia" },
        { name: "Sarajevo", coords: [18.4131, 43.8563], trip: 15, country: "Bosnia" },
        { name: "Kotor", coords: [18.7712, 42.4247], trip: 15, country: "Montenegro" },
        { name: "Podgorica", coords: [19.2636, 42.4304], trip: 15, country: "Montenegro" },

        // Trip 16: Eastern Balkans → Turkey → Caucasus
        { name: "Tirana", coords: [19.8187, 41.3275], trip: 16, country: "Albania" },
        { name: "Pristina", coords: [21.1655, 42.6629], trip: 16, country: "Kosovo" },
        { name: "Skopje", coords: [21.4314, 41.9981], trip: 16, country: "North Macedonia" },
        { name: "Belgrade", coords: [20.4489, 44.7866], trip: 16, country: "Serbia" },
        { name: "Bucharest", coords: [26.1025, 44.4268], trip: 16, country: "Romania" },
        { name: "Sofia", coords: [23.3219, 42.6977], trip: 16, country: "Bulgaria" },
        { name: "Istanbul", coords: [28.9784, 41.0082], trip: 16, country: "Turkey" },
        { name: "Cappadocia", coords: [34.8289, 38.6431], trip: 16, country: "Turkey" },
        { name: "Tbilisi", coords: [44.8271, 41.7151], trip: 16, country: "Georgia" },

        // Trip 17: Caucasus → Greece → Morocco
        { name: "Yerevan", coords: [44.5152, 40.1872], trip: 17, country: "Armenia" },
        { name: "Baku", coords: [49.8671, 40.4093], trip: 17, country: "Azerbaijan" },
        { name: "Athens", coords: [23.7275, 37.9838], trip: 17, country: "Greece" },
        { name: "Meteora", coords: [21.6306, 39.7217], trip: 17, country: "Greece" },
        { name: "Tangier", coords: [-5.8326, 35.7595], trip: 17, country: "Morocco" },
        { name: "Marrakech", coords: [-7.9811, 31.6295], trip: 17, country: "Morocco" },

        // Trip 18: Morocco → West Africa
        { name: "Fes", coords: [-5.0078, 34.0181], trip: 18, country: "Morocco" },
        { name: "Nouakchott", coords: [-15.9785, 18.0735], trip: 18, country: "Mauritania" },
        { name: "Dakar", coords: [-17.4677, 14.7167], trip: 18, country: "Senegal" },
        { name: "Banjul", coords: [-16.5885, 13.4549], trip: 18, country: "Gambia" },
        { name: "Bissau", coords: [-15.5977, 11.8816], trip: 18, country: "Guinea-Bissau" },
        { name: "Freetown", coords: [-13.2317, 8.4657], trip: 18, country: "Sierra Leone" },
        { name: "Monrovia", coords: [-10.8047, 6.3156], trip: 18, country: "Liberia" },
        { name: "Abidjan", coords: [-4.0305, 5.3600], trip: 18, country: "Ivory Coast" },
        { name: "Accra", coords: [-0.1869, 5.6037], trip: 18, country: "Ghana" },

        // Trip 19: Central → Southern Africa
        { name: "Lomé", coords: [1.2255, 6.1256], trip: 19, country: "Togo" },
        { name: "Cotonou", coords: [2.3158, 6.3654], trip: 19, country: "Benin" },
        { name: "Lagos", coords: [3.3792, 6.5244], trip: 19, country: "Nigeria" },
        { name: "Yaoundé", coords: [11.5021, 3.8480], trip: 19, country: "Cameroon" },
        { name: "Libreville", coords: [9.4673, 0.4162], trip: 19, country: "Gabon" },
        { name: "Brazzaville", coords: [15.2663, -4.2634], trip: 19, country: "Congo" },
        { name: "Luanda", coords: [13.2343, -8.8390], trip: 19, country: "Angola" },
        { name: "Windhoek", coords: [17.0658, -22.5609], trip: 19, country: "Namibia" },
        { name: "Sossusvlei", coords: [15.2938, -24.7275], trip: 19, country: "Namibia" },
        { name: "Maun", coords: [23.4162, -19.9833], trip: 19, country: "Botswana" },
        { name: "Victoria Falls", coords: [25.8572, -17.9243], trip: 19, country: "Zimbabwe" },
        { name: "Johannesburg", coords: [28.0473, -26.2041], trip: 19, country: "South Africa" },

        // Trip 20: East Africa
        { name: "Kruger NP", coords: [31.4854, -24.0119], trip: 20, country: "South Africa" },
        { name: "Maputo", coords: [32.5892, -25.9692], trip: 20, country: "Mozambique" },
        { name: "Lusaka", coords: [28.2871, -15.3875], trip: 20, country: "Zambia" },
        { name: "Dar es Salaam", coords: [39.2083, -6.7924], trip: 20, country: "Tanzania" },
        { name: "Zanzibar", coords: [39.1880, -6.1659], trip: 20, country: "Tanzania" },
        { name: "Nairobi", coords: [36.8219, -1.2921], trip: 20, country: "Kenya" },
        { name: "Kampala", coords: [32.5825, 0.3476], trip: 20, country: "Uganda" },
        { name: "Kigali", coords: [30.0619, -1.9403], trip: 20, country: "Rwanda" },
        { name: "Addis Ababa", coords: [38.7578, 9.0054], trip: 20, country: "Ethiopia" },
        { name: "Lalibela", coords: [38.9800, 12.0319], trip: 20, country: "Ethiopia" },

        // Trip 21: Egypt → Middle East → Dubai
        { name: "Khartoum", coords: [32.5599, 15.5007], trip: 21, country: "Sudan" },
        { name: "Meroë", coords: [33.7489, 16.9386], trip: 21, country: "Sudan" },
        { name: "Abu Simbel", coords: [31.6258, 22.3372], trip: 21, country: "Egypt" },
        { name: "Luxor", coords: [32.6421, 25.6872], trip: 21, country: "Egypt" },
        { name: "Cairo", coords: [31.2357, 30.0444], trip: 21, country: "Egypt" },
        { name: "Petra", coords: [35.4444, 30.3285], trip: 21, country: "Jordan" },
        { name: "Amman", coords: [35.9106, 31.9454], trip: 21, country: "Jordan" },
        { name: "AlUla", coords: [37.9236, 26.6175], trip: 21, country: "Saudi Arabia" },
        { name: "Jeddah", coords: [39.1925, 21.4858], trip: 21, country: "Saudi Arabia" },
        { name: "Riyadh", coords: [46.6753, 24.7136], trip: 21, country: "Saudi Arabia" },
        { name: "Kuwait City", coords: [47.9783, 29.3759], trip: 21, country: "Kuwait" },
        { name: "Dubai (End)", coords: [55.2708, 25.2048], trip: 21, country: "UAE" },
    ]
};

// Ship routes (dashed lines)
const shipRoutes = [
    { from: [55.3, 25.3], to: [56.28, 27.18], name: "Sharjah → Bandar Abbas" },
    { from: [78.15, 8.78], to: [79.86, 6.93], name: "Tuticorin → Colombo" },
    { from: [90.41, 23.81], to: [100.50, 13.76], name: "Dhaka → Bangkok" },
    { from: [153.03, -27.47], to: [174.76, -36.85], name: "Brisbane → Auckland" },
    { from: [174.76, -36.85], to: [-71.63, -33.05], name: "Auckland → Valparaíso" },
    { from: [-75.51, 10.39], to: [-79.52, 8.98], name: "Cartagena → Panama City" },
    { from: [-122.33, 47.61], to: [-1.40, 50.91], name: "Seattle → Southampton" },
];

const colors = {
    leg1: '#e74c3c',
    leg2: '#3498db',
    leg3: '#2ecc71',
    ship: '#9b59b6'
};

map.on('load', () => {
    // Add route lines for each leg
    ['leg1', 'leg2', 'leg3'].forEach(leg => {
        const coords = stops[leg].map(s => s.coords);

        map.addSource(`route-${leg}`, {
            type: 'geojson',
            data: {
                type: 'Feature',
                geometry: {
                    type: 'LineString',
                    coordinates: coords
                }
            }
        });

        map.addLayer({
            id: `route-${leg}`,
            type: 'line',
            source: `route-${leg}`,
            paint: {
                'line-color': colors[leg],
                'line-width': 3,
                'line-opacity': 0.7
            }
        });
    });

    // Add ship routes
    map.addSource('ship-routes', {
        type: 'geojson',
        data: {
            type: 'FeatureCollection',
            features: shipRoutes.map(r => ({
                type: 'Feature',
                geometry: {
                    type: 'LineString',
                    coordinates: [r.from, r.to]
                },
                properties: { name: r.name }
            }))
        }
    });

    map.addLayer({
        id: 'ship-routes',
        type: 'line',
        source: 'ship-routes',
        paint: {
            'line-color': colors.ship,
            'line-width': 2,
            'line-dasharray': [4, 4],
            'line-opacity': 0.8
        }
    });

    // Add markers for each leg
    ['leg1', 'leg2', 'leg3'].forEach(leg => {
        stops[leg].forEach(stop => {
            const el = document.createElement('div');
            el.className = `marker marker-${leg}`;
            el.style.width = '10px';
            el.style.height = '10px';
            el.style.backgroundColor = colors[leg];
            el.style.borderRadius = '50%';
            el.style.border = '2px solid white';
            el.style.boxShadow = '0 1px 3px rgba(0,0,0,0.3)';
            el.style.cursor = 'pointer';

            const popup = new mapboxgl.Popup({ offset: 10 })
                .setHTML(`
                    <div class="popup-title">${stop.name}</div>
                    <div class="popup-info">${stop.country} • Trip ${stop.trip}</div>
                `);

            new mapboxgl.Marker(el)
                .setLngLat(stop.coords)
                .setPopup(popup)
                .addTo(map);
        });
    });

    // Toggle controls
    document.getElementById('toggle-leg1').addEventListener('change', (e) => {
        const visibility = e.target.checked ? 'visible' : 'none';
        map.setLayoutProperty('route-leg1', 'visibility', visibility);
        document.querySelectorAll('.marker-leg1').forEach(m => m.style.display = e.target.checked ? 'block' : 'none');
    });

    document.getElementById('toggle-leg2').addEventListener('change', (e) => {
        const visibility = e.target.checked ? 'visible' : 'none';
        map.setLayoutProperty('route-leg2', 'visibility', visibility);
        document.querySelectorAll('.marker-leg2').forEach(m => m.style.display = e.target.checked ? 'block' : 'none');
    });

    document.getElementById('toggle-leg3').addEventListener('change', (e) => {
        const visibility = e.target.checked ? 'visible' : 'none';
        map.setLayoutProperty('route-leg3', 'visibility', visibility);
        document.querySelectorAll('.marker-leg3').forEach(m => m.style.display = e.target.checked ? 'block' : 'none');
    });

    document.getElementById('toggle-ships').addEventListener('change', (e) => {
        const visibility = e.target.checked ? 'visible' : 'none';
        map.setLayoutProperty('ship-routes', 'visibility', visibility);
    });
});

map.addControl(new mapboxgl.NavigationControl());
</script>
</body>
</html>
